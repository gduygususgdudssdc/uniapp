{"version":3,"file":"favorites.js","sources":["pages/user/favorites.vue","../../hbuildx/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvdXNlci9mYXZvcml0ZXMudnVl"],"sourcesContent":["<template>\r\n\t<view class=\"container\">\r\n\t\t<view class=\"goods-list\">\r\n\t\t\t<view class=\"goods-item\" v-for=\"item in favoritesList\" :key=\"item.id\" @click=\"goToDetail(item.id)\">\r\n\t\t\t\t<image class=\"goods-image\" :src=\"item.images[0]\" mode=\"aspectFill\"></image>\r\n\t\t\t\t<view class=\"goods-info\">\r\n\t\t\t\t\t<text class=\"goods-title\">{{ item.title }}</text>\r\n\t\t\t\t\t<text class=\"goods-desc\">{{ item.description }}</text>\r\n\t\t\t\t\t<view class=\"goods-footer\">\r\n\t\t\t\t\t\t<text class=\"goods-price\">¥{{ item.price }}</text>\r\n\t\t\t\t\t\t<view class=\"goods-actions\">\r\n\t\t\t\t\t\t\t<text class=\"goods-time\">{{ formatTime(item.createTime) }}</text>\r\n\t\t\t\t\t\t\t<view class=\"like-btn\" @click.stop=\"toggleLike(item.id)\">\r\n\t\t\t\t\t\t\t\t<uni-icons :type=\"item.isLiked ? 'heart-filled' : 'heart'\" \r\n\t\t\t\t\t\t\t\t\tsize=\"20\" :color=\"item.isLiked ? '#FF5722' : '#999'\"></uni-icons>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 空状态 -->\r\n\t\t<view v-if=\"favoritesList.length === 0\" class=\"empty\">\r\n\t\t\t<uni-icons type=\"heart\" size=\"80\" color=\"#ddd\"></uni-icons>\r\n\t\t\t<text>暂无收藏</text>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nimport { getGoodsList } from '@/utils/mockData.js'\r\n\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tfavoritesList: []\r\n\t\t}\r\n\t},\r\n\tonLoad() {\r\n\t\tthis.loadFavorites()\r\n\t},\r\n\tmethods: {\r\n\t\tloadFavorites() {\r\n\t\t\tthis.favoritesList = getGoodsList({ status: 'onSale' }).filter(item => item.isLiked)\r\n\t\t},\r\n\t\ttoggleLike(id) {\r\n\t\t\tconst item = this.favoritesList.find(g => g.id === id)\r\n\t\t\tif (item) {\r\n\t\t\t\titem.isLiked = false\r\n\t\t\t\tthis.favoritesList = this.favoritesList.filter(g => g.id !== id)\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '已取消收藏',\r\n\t\t\t\t\ticon: 'success'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\tgoToDetail(id) {\r\n\t\t\tuni.navigateTo({\r\n\t\t\t\turl: `/pages/goods/detail?id=${id}`\r\n\t\t\t})\r\n\t\t},\r\n\t\tformatTime(time) {\r\n\t\t\tconst date = new Date(time)\r\n\t\t\tconst now = new Date()\r\n\t\t\tconst diff = now - date\r\n\t\t\tconst days = Math.floor(diff / (1000 * 60 * 60 * 24))\r\n\t\t\tif (days === 0) {\r\n\t\t\t\tconst hours = Math.floor(diff / (1000 * 60 * 60))\r\n\t\t\t\tif (hours === 0) {\r\n\t\t\t\t\tconst minutes = Math.floor(diff / (1000 * 60))\r\n\t\t\t\t\treturn minutes + '分钟前'\r\n\t\t\t\t}\r\n\t\t\t\treturn hours + '小时前'\r\n\t\t\t}\r\n\t\t\treturn days + '天前'\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n\tmin-height: 100vh;\r\n\tbackground-color: #F5F5F5;\r\n}\r\n\r\n.goods-list {\r\n\tpadding: 20rpx;\r\n}\r\n\r\n.goods-item {\r\n\tdisplay: flex;\r\n\tbackground-color: #fff;\r\n\tborder-radius: 10rpx;\r\n\tpadding: 20rpx;\r\n\tmargin-bottom: 20rpx;\r\n}\r\n\r\n.goods-image {\r\n\twidth: 200rpx;\r\n\theight: 200rpx;\r\n\tborder-radius: 10rpx;\r\n\tmargin-right: 20rpx;\r\n}\r\n\r\n.goods-info {\r\n\tflex: 1;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tjustify-content: space-between;\r\n}\r\n\r\n.goods-title {\r\n\tfont-size: 28rpx;\r\n\tcolor: #333;\r\n\tfont-weight: bold;\r\n\tmargin-bottom: 10rpx;\r\n}\r\n\r\n.goods-desc {\r\n\tfont-size: 24rpx;\r\n\tcolor: #999;\r\n\tdisplay: -webkit-box;\r\n\t-webkit-box-orient: vertical;\r\n\t-webkit-line-clamp: 2;\r\n\toverflow: hidden;\r\n\tmargin-bottom: 10rpx;\r\n}\r\n\r\n.goods-footer {\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\talign-items: center;\r\n}\r\n\r\n.goods-price {\r\n\tfont-size: 32rpx;\r\n\tcolor: #FF5722;\r\n\tfont-weight: bold;\r\n}\r\n\r\n.goods-actions {\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tgap: 20rpx;\r\n}\r\n\r\n.goods-time {\r\n\tfont-size: 22rpx;\r\n\tcolor: #999;\r\n}\r\n\r\n.like-btn {\r\n\tpadding: 10rpx;\r\n}\r\n\r\n.empty {\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\tpadding: 200rpx 0;\r\n\tcolor: #999;\r\n}\r\n\r\n.empty text {\r\n\tmargin-top: 30rpx;\r\n\tfont-size: 28rpx;\r\n}\r\n</style>\r\n\r\n\r\n\r\n\r\n\r\n","import MiniProgramPage from 'G:/小程序xycy页面/SkyMark/pages/user/favorites.vue'\nwx.createPage(MiniProgramPage)"],"names":["getGoodsList","uni"],"mappings":";;;AAiCA,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,eAAe,CAAC;AAAA,IACjB;AAAA,EACA;AAAA,EACD,SAAS;AACR,SAAK,cAAc;AAAA,EACnB;AAAA,EACD,SAAS;AAAA,IACR,gBAAgB;AACf,WAAK,gBAAgBA,4BAAa,EAAE,QAAQ,UAAU,EAAE,OAAO,UAAQ,KAAK,OAAO;AAAA,IACnF;AAAA,IACD,WAAW,IAAI;AACd,YAAM,OAAO,KAAK,cAAc,KAAK,OAAK,EAAE,OAAO,EAAE;AACrD,UAAI,MAAM;AACT,aAAK,UAAU;AACf,aAAK,gBAAgB,KAAK,cAAc,OAAO,OAAK,EAAE,OAAO,EAAE;AAC/DC,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,SACN;AAAA,MACF;AAAA,IACA;AAAA,IACD,WAAW,IAAI;AACdA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK,0BAA0B,EAAE;AAAA,OACjC;AAAA,IACD;AAAA,IACD,WAAW,MAAM;AAChB,YAAM,OAAO,IAAI,KAAK,IAAI;AAC1B,YAAM,MAAM,oBAAI,KAAK;AACrB,YAAM,OAAO,MAAM;AACnB,YAAM,OAAO,KAAK,MAAM,QAAQ,MAAO,KAAK,KAAK,GAAG;AACpD,UAAI,SAAS,GAAG;AACf,cAAM,QAAQ,KAAK,MAAM,QAAQ,MAAO,KAAK,GAAG;AAChD,YAAI,UAAU,GAAG;AAChB,gBAAM,UAAU,KAAK,MAAM,QAAQ,MAAO,GAAG;AAC7C,iBAAO,UAAU;AAAA,QAClB;AACA,eAAO,QAAQ;AAAA,MAChB;AACA,aAAO,OAAO;AAAA,IACf;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7EA,GAAG,WAAW,eAAe;"}