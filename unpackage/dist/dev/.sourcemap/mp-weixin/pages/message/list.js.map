{"version":3,"file":"list.js","sources":["pages/message/list.vue","../../hbuildx/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbWVzc2FnZS9saXN0LnZ1ZQ"],"sourcesContent":["<template>\r\n\t<view class=\"container\">\r\n\t\t<view class=\"message-list\">\r\n\t\t\t<view class=\"message-item\" v-for=\"item in messageList\" :key=\"item.id\" @click=\"goToChat(item.userId)\">\r\n\t\t\t\t<image class=\"avatar\" :src=\"item.avatar\" mode=\"aspectFill\"></image>\r\n\t\t\t\t<view class=\"message-content\">\r\n\t\t\t\t\t<view class=\"message-header\">\r\n\t\t\t\t\t\t<text class=\"username\">{{ item.username }}</text>\r\n\t\t\t\t\t\t<text class=\"time\">{{ formatTime(item.lastTime) }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"message-body\">\r\n\t\t\t\t\t\t<text class=\"last-message\">{{ item.lastMessage }}</text>\r\n\t\t\t\t\t\t<view class=\"unread-badge\" v-if=\"item.unreadCount > 0\">\r\n\t\t\t\t\t\t\t<text>{{ item.unreadCount }}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 空状态 -->\r\n\t\t<view v-if=\"messageList.length === 0\" class=\"empty\">\r\n\t\t\t<uni-icons type=\"chatboxes\" size=\"80\" color=\"#ddd\"></uni-icons>\r\n\t\t\t<text>暂无消息</text>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\r\n\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tmessageList: []\r\n\t\t}\r\n\t},\r\n\tonLoad() {\r\n\t\tthis.loadMessages()\r\n\t},\r\n\tonShow() {\r\n\t\tthis.loadMessages()\r\n\t},\r\n\tmethods: {\r\n\t\tloadMessages() {\r\n\t\t\tthis.messageList = getMessageList()\r\n\t\t},\r\n\t\tgoToChat(userId) {\r\n\t\t\tuni.navigateTo({\r\n\t\t\t\turl: `/pages/message/chat?userId=${userId}`\r\n\t\t\t})\r\n\t\t},\r\n\t\tformatTime(time) {\r\n\t\t\tconst date = new Date(time)\r\n\t\t\tconst now = new Date()\r\n\t\t\tconst diff = now - date\r\n\t\t\tconst days = Math.floor(diff / (1000 * 60 * 60 * 24))\r\n\t\t\tif (days === 0) {\r\n\t\t\t\tconst hours = Math.floor(diff / (1000 * 60 * 60))\r\n\t\t\t\tif (hours === 0) {\r\n\t\t\t\t\tconst minutes = Math.floor(diff / (1000 * 60))\r\n\t\t\t\t\treturn minutes + '分钟前'\r\n\t\t\t\t}\r\n\t\t\t\treturn hours + '小时前'\r\n\t\t\t}\r\n\t\t\tif (days === 1) return '昨天'\r\n\t\t\tif (days < 7) return days + '天前'\r\n\t\t\treturn date.toLocaleDateString()\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n\tmin-height: 100vh;\r\n\tbackground-color: #F5F5F5;\r\n}\r\n\r\n.message-list {\r\n\tpadding: 20rpx;\r\n}\r\n\r\n.message-item {\r\n\tdisplay: flex;\r\n\tbackground-color: #fff;\r\n\tborder-radius: 10rpx;\r\n\tpadding: 30rpx;\r\n\tmargin-bottom: 20rpx;\r\n}\r\n\r\n.avatar {\r\n\twidth: 100rpx;\r\n\theight: 100rpx;\r\n\tborder-radius: 50%;\r\n\tmargin-right: 20rpx;\r\n}\r\n\r\n.message-content {\r\n\tflex: 1;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tjustify-content: space-between;\r\n}\r\n\r\n.message-header {\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\talign-items: center;\r\n\tmargin-bottom: 10rpx;\r\n}\r\n\r\n.username {\r\n\tfont-size: 30rpx;\r\n\tcolor: #333;\r\n\tfont-weight: bold;\r\n}\r\n\r\n.time {\r\n\tfont-size: 24rpx;\r\n\tcolor: #999;\r\n}\r\n\r\n.message-body {\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\talign-items: center;\r\n}\r\n\r\n.last-message {\r\n\tflex: 1;\r\n\tfont-size: 26rpx;\r\n\tcolor: #666;\r\n\toverflow: hidden;\r\n\ttext-overflow: ellipsis;\r\n\twhite-space: nowrap;\r\n}\r\n\r\n.unread-badge {\r\n\tmin-width: 36rpx;\r\n\theight: 36rpx;\r\n\tbackground-color: #FF5722;\r\n\tborder-radius: 18rpx;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\tpadding: 0 10rpx;\r\n\tmargin-left: 20rpx;\r\n}\r\n\r\n.unread-badge text {\r\n\tfont-size: 20rpx;\r\n\tcolor: #fff;\r\n}\r\n\r\n.empty {\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\tpadding: 200rpx 0;\r\n\tcolor: #999;\r\n}\r\n\r\n.empty text {\r\n\tmargin-top: 30rpx;\r\n\tfont-size: 28rpx;\r\n}\r\n</style>\r\n\r\n\r\n\r\n\r\n\r\n","import MiniProgramPage from 'G:/小程序xycy页面/SkyMark/pages/message/list.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":";;AA+BA,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,aAAa,CAAC;AAAA,IACf;AAAA,EACA;AAAA,EACD,SAAS;AACR,SAAK,aAAa;AAAA,EAClB;AAAA,EACD,SAAS;AACR,SAAK,aAAa;AAAA,EAClB;AAAA,EACD,SAAS;AAAA,IACR,eAAe;AACd,WAAK,cAAc,eAAe;AAAA,IAClC;AAAA,IACD,SAAS,QAAQ;AAChBA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK,8BAA8B,MAAM;AAAA,OACzC;AAAA,IACD;AAAA,IACD,WAAW,MAAM;AAChB,YAAM,OAAO,IAAI,KAAK,IAAI;AAC1B,YAAM,MAAM,oBAAI,KAAK;AACrB,YAAM,OAAO,MAAM;AACnB,YAAM,OAAO,KAAK,MAAM,QAAQ,MAAO,KAAK,KAAK,GAAG;AACpD,UAAI,SAAS,GAAG;AACf,cAAM,QAAQ,KAAK,MAAM,QAAQ,MAAO,KAAK,GAAG;AAChD,YAAI,UAAU,GAAG;AAChB,gBAAM,UAAU,KAAK,MAAM,QAAQ,MAAO,GAAG;AAC7C,iBAAO,UAAU;AAAA,QAClB;AACA,eAAO,QAAQ;AAAA,MAChB;AACA,UAAI,SAAS;AAAG,eAAO;AACvB,UAAI,OAAO;AAAG,eAAO,OAAO;AAC5B,aAAO,KAAK,mBAAmB;AAAA,IAChC;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrEA,GAAG,WAAW,eAAe;"}