{"version":3,"file":"result.js","sources":["pages/search/result.vue","../../hbuildx/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvc2VhcmNoL3Jlc3VsdC52dWU"],"sourcesContent":["<template>\n\t<view class=\"container\">\n\t\t<!-- ÊêúÁ¥¢Ê†è -->\n\t\t<view class=\"search-bar\">\n\t\t\t<view class=\"search-input-wrapper\">\n\t\t\t\t<text class=\"search-icon\">üîç</text>\n\t\t\t\t<input class=\"search-input\" v-model=\"keyword\" placeholder=\"ÊêúÁ¥¢ÂïÜÂìÅ\"\n\t\t\t\t\t@confirm=\"handleSearch\" />\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<!-- Á≠õÈÄâÊ†è -->\n\t\t<view class=\"filter-bar\">\n\t\t\t<view class=\"filter-item\" @click=\"showSort = !showSort\">\n\t\t\t\t<text>{{ sortText }}</text>\n\t\t\t\t<text class=\"arrow-icon\">‚Üì</text>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<!-- ÂïÜÂìÅÂàóË°® -->\n\t\t<view class=\"goods-list\">\n\t\t\t<view class=\"goods-item\" v-for=\"item in goodsList\" :key=\"item.id\" @click=\"goToDetail(item.id)\">\n\t\t\t\t<image class=\"goods-image\" :src=\"item.images[0]\" mode=\"aspectFill\"></image>\n\t\t\t\t<view class=\"goods-info\">\n\t\t\t\t\t<text class=\"goods-title\">{{ item.title }}</text>\n\t\t\t\t\t<text class=\"goods-desc\">{{ item.description }}</text>\n\t\t\t\t\t<view class=\"goods-footer\">\n\t\t\t\t\t\t<text class=\"goods-price\">¬•{{ item.price }}</text>\n\t\t\t\t\t\t<text class=\"goods-location\">{{ item.location }}</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<!-- Á©∫Áä∂ÊÄÅ -->\n\t\t<view v-if=\"goodsList.length === 0\" class=\"empty\">\n\t\t\t<text>Êú™ÊâæÂà∞Áõ∏ÂÖ≥ÂïÜÂìÅ</text>\n\t\t</view>\n\t\t\n\t\t<!-- ÊéíÂ∫èÂºπÁ™ó -->\n\t\t<view v-if=\"showSort\" class=\"popup\" @click=\"showSort = false\">\n\t\t\t<view class=\"popup-content\" @click.stop>\n\t\t\t\t<view class=\"popup-item\" v-for=\"item in sortOptions\" :key=\"item.value\"\n\t\t\t\t\t:class=\"{ active: currentSort === item.value }\" @click=\"selectSort(item.value)\">\n\t\t\t\t\t<text>{{ item.label }}</text>\n\t\t\t\t\t<text v-if=\"currentSort === item.value\" class=\"checkmark-icon\">‚úì</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\nimport { goodsApi } from '@/utils/apiService.js'\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tkeyword: '',\n\t\t\tcurrentSort: '',\n\t\t\tshowSort: false,\n\t\t\tgoodsList: [],\n\t\t\tsortOptions: [\n\t\t\t\t{ label: 'ÁªºÂêàÊéíÂ∫è', value: '' },\n\t\t\t\t{ label: '‰ª∑Ê†º‰ªé‰ΩéÂà∞È´ò', value: 'price_asc' },\n\t\t\t\t{ label: '‰ª∑Ê†º‰ªéÈ´òÂà∞‰Ωé', value: 'price_desc' },\n\t\t\t\t{ label: 'ÊúÄÊñ∞ÂèëÂ∏É', value: 'time_desc' }\n\t\t\t]\n\t\t}\n\t},\n\tcomputed: {\n\t\tsortText() {\n\t\t\tconst option = this.sortOptions.find(item => item.value === this.currentSort)\n\t\t\treturn option ? option.label : 'ÁªºÂêàÊéíÂ∫è'\n\t\t}\n\t},\n\tonLoad(options) {\n\t\tif (options.keyword) {\n\t\t\tthis.keyword = options.keyword\n\t\t\tthis.handleSearch()\n\t\t}\n\t},\n\tmethods: {\n\t\tasync handleSearch() {\n\t\t\ttry {\n\t\t\t\tconst result = await goodsApi.searchGoods(this.keyword, 'onSale', 0, 20)\n\t\t\t\tlet list = result.content || result || []\n\t\t\t\t\n\t\t\t\t// Â§ÑÁêÜÊéíÂ∫è\n\t\t\t\tif (this.currentSort === 'price_asc') {\n\t\t\t\t\tlist.sort((a, b) => a.price - b.price)\n\t\t\t\t} else if (this.currentSort === 'price_desc') {\n\t\t\t\t\tlist.sort((a, b) => b.price - a.price)\n\t\t\t\t} else if (this.currentSort === 'time_desc') {\n\t\t\t\t\tlist.sort((a, b) => new Date(b.createTime) - new Date(a.createTime))\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Â§ÑÁêÜÂõæÁâáÊï∞ÊçÆ\n\t\t\t\tlist.forEach(item => {\n\t\t\t\t\tif (typeof item.images === 'string') {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\titem.images = JSON.parse(item.images)\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\titem.images = [item.images]\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (!Array.isArray(item.images)) {\n\t\t\t\t\t\titem.images = []\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\tthis.goodsList = list\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('ÊêúÁ¥¢Â§±Ë¥•:', error)\n\t\t\t\tuni.showToast({ title: 'ÊêúÁ¥¢Â§±Ë¥•', icon: 'none' })\n\t\t\t\tthis.goodsList = []\n\t\t\t}\n\t\t},\n\t\tselectSort(value) {\n\t\t\tthis.currentSort = value\n\t\t\tthis.showSort = false\n\t\t\tthis.handleSearch()\n\t\t},\n\t\tgoToDetail(id) {\n\t\t\tuni.navigateTo({\n\t\t\t\turl: `/pages/goods/detail?id=${id}`\n\t\t\t})\n\t\t}\n\t}\n}\n</script>\n\n<style scoped>\n.container {\n\tmin-height: 100vh;\n\tbackground-color: #F5F5F5;\n}\n\n.search-bar {\n\tbackground-color: #fff;\n\tpadding: 20rpx;\n\tborder-bottom: 1rpx solid #eee;\n}\n\n.search-input-wrapper {\n\tdisplay: flex;\n\talign-items: center;\n\tbackground-color: #F5F5F5;\n\tborder-radius: 40rpx;\n\tpadding: 0 30rpx;\n\theight: 70rpx;\n}\n\n.search-input {\n\tflex: 1;\n\tfont-size: 28rpx;\n\tmargin: 0 10rpx;\n}\n\n.search-icon {\n\tfont-size: 24rpx;\n\tmargin-right: 10rpx;\n}\n\n.arrow-icon {\n\tfont-size: 20rpx;\n\tmargin-left: 10rpx;\n\tcolor: #666;\n}\n\n.checkmark-icon {\n\tfont-size: 24rpx;\n\tcolor: #007AFF;\n\tfont-weight: bold;\n}\n\n.filter-bar {\n\tdisplay: flex;\n\tbackground-color: #fff;\n\tpadding: 20rpx;\n\tborder-bottom: 1rpx solid #eee;\n}\n\n.filter-item {\n\tdisplay: flex;\n\talign-items: center;\n\tfont-size: 28rpx;\n\tcolor: #666;\n}\n\n.goods-list {\n\tpadding: 20rpx;\n}\n\n.goods-item {\n\tdisplay: flex;\n\tbackground-color: #fff;\n\tborder-radius: 10rpx;\n\tpadding: 20rpx;\n\tmargin-bottom: 20rpx;\n}\n\n.goods-image {\n\twidth: 200rpx;\n\theight: 200rpx;\n\tborder-radius: 10rpx;\n\tmargin-right: 20rpx;\n}\n\n.goods-info {\n\tflex: 1;\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: space-between;\n}\n\n.goods-title {\n\tfont-size: 28rpx;\n\tcolor: #333;\n\tfont-weight: bold;\n\tmargin-bottom: 10rpx;\n}\n\n.goods-desc {\n\tfont-size: 24rpx;\n\tcolor: #999;\n\tdisplay: -webkit-box;\n\t-webkit-box-orient: vertical;\n\t-webkit-line-clamp: 2;\n\toverflow: hidden;\n\tmargin-bottom: 10rpx;\n}\n\n.goods-footer {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n}\n\n.goods-price {\n\tfont-size: 32rpx;\n\tcolor: #FF5722;\n\tfont-weight: bold;\n}\n\n.goods-location {\n\tfont-size: 22rpx;\n\tcolor: #999;\n}\n\n.empty {\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tpadding: 100rpx 0;\n\tcolor: #999;\n}\n\n.popup {\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\tright: 0;\n\tbottom: 0;\n\tbackground-color: rgba(0, 0, 0, 0.5);\n\tz-index: 999;\n}\n\n.popup-content {\n\tbackground-color: #fff;\n\tmargin-top: 88rpx;\n}\n\n.popup-item {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\tpadding: 30rpx;\n\tborder-bottom: 1rpx solid #eee;\n}\n\n.popup-item.active {\n\tcolor: #007AFF;\n}\n</style>\n\n\n\n\n\n","import MiniProgramPage from 'G:/Â∞èÁ®ãÂ∫èxycyÈ°µÈù¢/SkyMark/pages/search/result.vue'\nwx.createPage(MiniProgramPage)"],"names":["goodsApi","uni"],"mappings":";;;AAuDA,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,SAAS;AAAA,MACT,aAAa;AAAA,MACb,UAAU;AAAA,MACV,WAAW,CAAE;AAAA,MACb,aAAa;AAAA,QACZ,EAAE,OAAO,QAAQ,OAAO,GAAI;AAAA,QAC5B,EAAE,OAAO,UAAU,OAAO,YAAa;AAAA,QACvC,EAAE,OAAO,UAAU,OAAO,aAAc;AAAA,QACxC,EAAE,OAAO,QAAQ,OAAO,YAAY;AAAA,MACrC;AAAA,IACD;AAAA,EACA;AAAA,EACD,UAAU;AAAA,IACT,WAAW;AACV,YAAM,SAAS,KAAK,YAAY,KAAK,UAAQ,KAAK,UAAU,KAAK,WAAW;AAC5E,aAAO,SAAS,OAAO,QAAQ;AAAA,IAChC;AAAA,EACA;AAAA,EACD,OAAO,SAAS;AACf,QAAI,QAAQ,SAAS;AACpB,WAAK,UAAU,QAAQ;AACvB,WAAK,aAAa;AAAA,IACnB;AAAA,EACA;AAAA,EACD,SAAS;AAAA,IACR,MAAM,eAAe;AACpB,UAAI;AACH,cAAM,SAAS,MAAMA,iBAAAA,SAAS,YAAY,KAAK,SAAS,UAAU,GAAG,EAAE;AACvE,YAAI,OAAO,OAAO,WAAW,UAAU,CAAC;AAGxC,YAAI,KAAK,gBAAgB,aAAa;AACrC,eAAK,KAAK,CAAC,GAAG,MAAM,EAAE,QAAQ,EAAE,KAAK;AAAA,QACtC,WAAW,KAAK,gBAAgB,cAAc;AAC7C,eAAK,KAAK,CAAC,GAAG,MAAM,EAAE,QAAQ,EAAE,KAAK;AAAA,QACtC,WAAW,KAAK,gBAAgB,aAAa;AAC5C,eAAK,KAAK,CAAC,GAAG,MAAM,IAAI,KAAK,EAAE,UAAU,IAAI,IAAI,KAAK,EAAE,UAAU,CAAC;AAAA,QACpE;AAGA,aAAK,QAAQ,UAAQ;AACpB,cAAI,OAAO,KAAK,WAAW,UAAU;AACpC,gBAAI;AACH,mBAAK,SAAS,KAAK,MAAM,KAAK,MAAM;AAAA,YACrC,SAAS,GAAG;AACX,mBAAK,SAAS,CAAC,KAAK,MAAM;AAAA,YAC3B;AAAA,UACD;AACA,cAAI,CAAC,MAAM,QAAQ,KAAK,MAAM,GAAG;AAChC,iBAAK,SAAS,CAAC;AAAA,UAChB;AAAA,SACA;AAED,aAAK,YAAY;AAAA,MAChB,SAAO,OAAO;AACfC,sBAAAA,uDAAc,SAAS,KAAK;AAC5BA,sBAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,QAAQ;AAC7C,aAAK,YAAY,CAAC;AAAA,MACnB;AAAA,IACA;AAAA,IACD,WAAW,OAAO;AACjB,WAAK,cAAc;AACnB,WAAK,WAAW;AAChB,WAAK,aAAa;AAAA,IAClB;AAAA,IACD,WAAW,IAAI;AACdA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK,0BAA0B,EAAE;AAAA,OACjC;AAAA,IACF;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChIA,GAAG,WAAW,eAAe;"}