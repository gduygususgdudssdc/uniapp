{"version":3,"file":"edit.js","sources":["pages/goods/edit.vue","../../hbuildx/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvZ29vZHMvZWRpdC52dWU"],"sourcesContent":["<template>\r\n\t<view class=\"container\">\r\n\t\t<view class=\"form\">\r\n\t\t\t<view class=\"form-item\">\r\n\t\t\t\t<text class=\"label\">商品标题</text>\r\n\t\t\t\t<input class=\"input\" v-model=\"form.title\" placeholder=\"请输入商品标题\" />\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<view class=\"form-item\">\r\n\t\t\t\t<text class=\"label\">商品图片</text>\r\n\t\t\t\t<view class=\"upload-images\">\r\n\t\t\t\t\t<view class=\"image-item\" v-for=\"(img, index) in form.images\" :key=\"index\">\r\n\t\t\t\t\t\t<image :src=\"img\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t\t<view class=\"delete-btn\" @click=\"deleteImage(index)\">×</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"upload-btn\" v-if=\"form.images.length < 9\" @click=\"chooseImage\">\r\n\t\t\t\t\t\t<uni-icons type=\"plus\" size=\"40\" color=\"#999\"></uni-icons>\r\n\t\t\t\t\t\t<text>添加图片</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<view class=\"form-item\">\r\n\t\t\t\t<text class=\"label\">售价</text>\r\n\t\t\t\t<view class=\"price-input\">\r\n\t\t\t\t\t<text class=\"currency\">¥</text>\r\n\t\t\t\t\t<input class=\"input\" type=\"digit\" v-model=\"form.price\" placeholder=\"0.00\" />\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<view class=\"form-item\">\r\n\t\t\t\t<text class=\"label\">商品描述</text>\r\n\t\t\t\t<textarea class=\"textarea\" v-model=\"form.description\" placeholder=\"请详细描述商品信息...\" maxlength=\"500\"></textarea>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<button class=\"submit-btn\" @click=\"handleSubmit\">保存修改</button>\r\n\t\t\t<button class=\"delete-btn-full\" @click=\"handleDelete\">删除商品</button>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nimport { getGoodsDetail } from '@/utils/mockData.js'\r\n\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tgoodsId: '',\r\n\t\t\tform: {\r\n\t\t\t\ttitle: '',\r\n\t\t\t\timages: [],\r\n\t\t\t\tprice: '',\r\n\t\t\t\tdescription: ''\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tonLoad(options) {\r\n\t\tif (options.id) {\r\n\t\t\tthis.goodsId = options.id\r\n\t\t\tthis.loadGoods()\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tloadGoods() {\r\n\t\t\tconst goods = getGoodsDetail(this.goodsId)\r\n\t\t\tif (goods) {\r\n\t\t\t\tthis.form = {\r\n\t\t\t\t\ttitle: goods.title,\r\n\t\t\t\t\timages: [...goods.images],\r\n\t\t\t\t\tprice: goods.price.toString(),\r\n\t\t\t\t\tdescription: goods.description\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tchooseImage() {\r\n\t\t\tuni.chooseImage({\r\n\t\t\t\tcount: 9 - this.form.images.length,\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tthis.form.images = [...this.form.images, ...res.tempFilePaths]\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\tdeleteImage(index) {\r\n\t\t\tthis.form.images.splice(index, 1)\r\n\t\t},\r\n\t\thandleSubmit() {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '修改成功',\r\n\t\t\t\ticon: 'success'\r\n\t\t\t})\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tuni.navigateBack()\r\n\t\t\t}, 1500)\r\n\t\t},\r\n\t\thandleDelete() {\r\n\t\t\tuni.showModal({\r\n\t\t\t\ttitle: '提示',\r\n\t\t\t\tcontent: '确定要删除此商品吗？',\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '删除成功',\r\n\t\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tuni.navigateBack()\r\n\t\t\t\t\t\t}, 1500)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n\tmin-height: 100vh;\r\n\tbackground-color: #F5F5F5;\r\n\tpadding: 20rpx;\r\n}\r\n\r\n.form {\r\n\tbackground-color: #fff;\r\n\tborder-radius: 10rpx;\r\n\tpadding: 30rpx;\r\n}\r\n\r\n.form-item {\r\n\tmargin-bottom: 40rpx;\r\n}\r\n\r\n.label {\r\n\tfont-size: 28rpx;\r\n\tcolor: #333;\r\n\tfont-weight: bold;\r\n\tmargin-bottom: 20rpx;\r\n\tdisplay: block;\r\n}\r\n\r\n.input {\r\n\twidth: 100%;\r\n\theight: 80rpx;\r\n\tbackground-color: #F5F5F5;\r\n\tborder-radius: 10rpx;\r\n\tpadding: 0 20rpx;\r\n\tfont-size: 28rpx;\r\n}\r\n\r\n.upload-images {\r\n\tdisplay: flex;\r\n\tflex-wrap: wrap;\r\n\tgap: 20rpx;\r\n}\r\n\r\n.image-item {\r\n\tposition: relative;\r\n\twidth: 200rpx;\r\n\theight: 200rpx;\r\n\tborder-radius: 10rpx;\r\n\toverflow: hidden;\r\n}\r\n\r\n.image-item image {\r\n\twidth: 100%;\r\n\theight: 100%;\r\n}\r\n\r\n.delete-btn {\r\n\tposition: absolute;\r\n\ttop: 0;\r\n\tright: 0;\r\n\twidth: 40rpx;\r\n\theight: 40rpx;\r\n\tbackground-color: rgba(0, 0, 0, 0.6);\r\n\tcolor: #fff;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\tfont-size: 32rpx;\r\n\tborder-radius: 0 0 0 10rpx;\r\n}\r\n\r\n.upload-btn {\r\n\twidth: 200rpx;\r\n\theight: 200rpx;\r\n\tborder: 2rpx dashed #ddd;\r\n\tborder-radius: 10rpx;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\tcolor: #999;\r\n\tfont-size: 24rpx;\r\n}\r\n\r\n.price-input {\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tbackground-color: #F5F5F5;\r\n\tborder-radius: 10rpx;\r\n\tpadding: 0 20rpx;\r\n}\r\n\r\n.currency {\r\n\tfont-size: 28rpx;\r\n\tcolor: #333;\r\n\tmargin-right: 10rpx;\r\n}\r\n\r\n.textarea {\r\n\twidth: 100%;\r\n\tmin-height: 200rpx;\r\n\tbackground-color: #F5F5F5;\r\n\tborder-radius: 10rpx;\r\n\tpadding: 20rpx;\r\n\tfont-size: 28rpx;\r\n}\r\n\r\n.submit-btn {\r\n\twidth: 100%;\r\n\theight: 88rpx;\r\n\tbackground-color: #007AFF;\r\n\tcolor: #fff;\r\n\tborder-radius: 50rpx;\r\n\tfont-size: 32rpx;\r\n\tmargin-top: 40rpx;\r\n\tborder: none;\r\n}\r\n\r\n.delete-btn-full {\r\n\twidth: 100%;\r\n\theight: 88rpx;\r\n\tbackground-color: #FF5722;\r\n\tcolor: #fff;\r\n\tborder-radius: 50rpx;\r\n\tfont-size: 32rpx;\r\n\tmargin-top: 20rpx;\r\n\tborder: none;\r\n}\r\n</style>\r\n\r\n\r\n\r\n\r\n\r\n","import MiniProgramPage from 'G:/小程序xycy页面/SkyMark/pages/goods/edit.vue'\nwx.createPage(MiniProgramPage)"],"names":["getGoodsDetail","uni"],"mappings":";;;AA4CA,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,SAAS;AAAA,MACT,MAAM;AAAA,QACL,OAAO;AAAA,QACP,QAAQ,CAAE;AAAA,QACV,OAAO;AAAA,QACP,aAAa;AAAA,MACd;AAAA,IACD;AAAA,EACA;AAAA,EACD,OAAO,SAAS;AACf,QAAI,QAAQ,IAAI;AACf,WAAK,UAAU,QAAQ;AACvB,WAAK,UAAU;AAAA,IAChB;AAAA,EACA;AAAA,EACD,SAAS;AAAA,IACR,YAAY;AACX,YAAM,QAAQA,eAAAA,eAAe,KAAK,OAAO;AACzC,UAAI,OAAO;AACV,aAAK,OAAO;AAAA,UACX,OAAO,MAAM;AAAA,UACb,QAAQ,CAAC,GAAG,MAAM,MAAM;AAAA,UACxB,OAAO,MAAM,MAAM,SAAU;AAAA,UAC7B,aAAa,MAAM;AAAA,QACpB;AAAA,MACD;AAAA,IACA;AAAA,IACD,cAAc;AACbC,oBAAAA,MAAI,YAAY;AAAA,QACf,OAAO,IAAI,KAAK,KAAK,OAAO;AAAA,QAC5B,SAAS,CAAC,QAAQ;AACjB,eAAK,KAAK,SAAS,CAAC,GAAG,KAAK,KAAK,QAAQ,GAAG,IAAI,aAAa;AAAA,QAC9D;AAAA,OACA;AAAA,IACD;AAAA,IACD,YAAY,OAAO;AAClB,WAAK,KAAK,OAAO,OAAO,OAAO,CAAC;AAAA,IAChC;AAAA,IACD,eAAe;AACdA,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO;AAAA,QACP,MAAM;AAAA,OACN;AACD,iBAAW,MAAM;AAChBA,sBAAAA,MAAI,aAAa;AAAA,MACjB,GAAE,IAAI;AAAA,IACP;AAAA,IACD,eAAe;AACdA,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO;AAAA,QACP,SAAS;AAAA,QACT,SAAS,CAAC,QAAQ;AACjB,cAAI,IAAI,SAAS;AAChBA,0BAAAA,MAAI,UAAU;AAAA,cACb,OAAO;AAAA,cACP,MAAM;AAAA,aACN;AACD,uBAAW,MAAM;AAChBA,4BAAAA,MAAI,aAAa;AAAA,YACjB,GAAE,IAAI;AAAA,UACR;AAAA,QACD;AAAA,OACA;AAAA,IACF;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC/GA,GAAG,WAAW,eAAe;"}