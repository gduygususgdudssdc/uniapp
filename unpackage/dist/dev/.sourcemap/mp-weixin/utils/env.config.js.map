{"version":3,"file":"env.config.js","sources":["utils/env.config.js"],"sourcesContent":["// 环境变量配置文件\r\n// 可以通过修改此文件来设置不同环境的 API 地址\r\n\r\n// 开发环境配置\r\nconst development = {\r\n  baseURL: 'http://localhost:8080/api',\r\n  timeout: 10000,\r\n  showLoading: true,\r\n  showError: true\r\n}\r\n\r\n// 真机调试环境配置（局域网 IP）\r\nconst device = {\r\n  baseURL: 'http://10.1.23.38:8080/api', // 你的电脑局域网 IP\r\n  timeout: 10000,\r\n  showLoading: true,\r\n  showError: true\r\n}\r\n\r\n// 公网访问配置（使用 cpolar 内网穿透）\r\nconst publicConfig = {\r\n  baseURL: 'https://56b33ccb.r5.cpolar.top/api', // cpolar 公网地址\r\n  timeout: 15000, // 公网访问可能需要更长时间\r\n  showLoading: true,\r\n  showError: true\r\n}\r\n\r\n// 生产环境配置\r\nconst production = {\r\n  baseURL: 'https://your-domain.com/api', // 替换为实际的生产服务器地址\r\n  timeout: 10000,\r\n  showLoading: true,\r\n  showError: true\r\n}\r\n\r\n// 根据环境变量或手动设置选择配置\r\n// 可以通过以下方式设置环境：\r\n// 1. 在 HBuilderX 中设置：运行 -> 运行到小程序模拟器 -> 运行配置 -> 环境变量\r\n// 2. 在代码中手动设置：window.ENV = 'device'\r\n// 3. 使用 uni-app 的条件编译\r\n\r\nlet currentEnv = 'public' // 默认使用开发环境\r\n\r\n// 尝试从环境变量获取\r\n// #ifdef H5\r\nif (import.meta.env?.MODE) {\r\n  currentEnv = import.meta.env.MODE\r\n} else if (import.meta.env?.VITE_APP_ENV) {\r\n  currentEnv = import.meta.env.VITE_APP_ENV\r\n}\r\n// #endif\r\n\r\n// 尝试从全局变量获取（用于手动设置）\r\nif (typeof window !== 'undefined' && window.ENV) {\r\n  currentEnv = window.ENV\r\n}\r\n\r\n// 尝试从本地存储获取（用于持久化环境配置）\r\ntry {\r\n  const storedEnv = uni.getStorageSync('appEnv')\r\n  if (storedEnv) {\r\n    currentEnv = storedEnv\r\n  }\r\n} catch (e) {\r\n  // 忽略错误\r\n}\r\n\r\n// 根据环境选择配置\r\nlet envConfig = development // 默认配置\r\n\r\nswitch (currentEnv) {\r\n  case 'device':\r\n  case 'mobile':\r\n    envConfig = device\r\n    break\r\n  case 'public':      // 新增：公网访问\r\n  case 'internet':    // 新增：公网访问\r\n  case 'cpolar':     // 新增：cpolar 专用\r\n    envConfig = publicConfig\r\n    break\r\n  case 'production':\r\n  case 'prod':\r\n    envConfig = production\r\n    break\r\n  case 'development':\r\n  case 'dev':\r\n  default:\r\n    envConfig = development\r\n    break\r\n}\r\n\r\n// 导出环境配置\r\nexport default {\r\n  ...envConfig,\r\n  // 当前环境\r\n  env: currentEnv,\r\n  // 是否为开发环境\r\n  isDev: currentEnv === 'development' || currentEnv === 'dev',\r\n  // 是否为生产环境\r\n  isProd: currentEnv === 'production' || currentEnv === 'prod',\r\n  // 是否为真机调试\r\n  isDevice: currentEnv === 'device' || currentEnv === 'mobile',\r\n  // 是否为公网访问\r\n  isPublic: currentEnv === 'public' || currentEnv === 'internet' || currentEnv === 'cpolar'\r\n}\r\n\r\n"],"names":["uni"],"mappings":";;AAIA,MAAM,cAAc;AAAA,EAClB,SAAS;AAAA,EACT,SAAS;AAAA,EACT,aAAa;AAAA,EACb,WAAW;AACb;AAGA,MAAM,SAAS;AAAA,EACb,SAAS;AAAA;AAAA,EACT,SAAS;AAAA,EACT,aAAa;AAAA,EACb,WAAW;AACb;AAGA,MAAM,eAAe;AAAA,EACnB,SAAS;AAAA;AAAA,EACT,SAAS;AAAA;AAAA,EACT,aAAa;AAAA,EACb,WAAW;AACb;AAGA,MAAM,aAAa;AAAA,EACjB,SAAS;AAAA;AAAA,EACT,SAAS;AAAA,EACT,aAAa;AAAA,EACb,WAAW;AACb;AAQA,IAAI,aAAa;AAYjB,IAAI,OAAO,WAAW,eAAe,OAAO,KAAK;AAC/C,eAAa,OAAO;AACtB;AAGA,IAAI;AACF,QAAM,YAAYA,cAAAA,MAAI,eAAe,QAAQ;AAC7C,MAAI,WAAW;AACb,iBAAa;AAAA,EACd;AACH,SAAS,GAAG;AAEZ;AAGA,IAAI,YAAY;AAEhB,QAAQ,YAAU;AAAA,EAChB,KAAK;AAAA,EACL,KAAK;AACH,gBAAY;AACZ;AAAA,EACF,KAAK;AAAA,EACL,KAAK;AAAA,EACL,KAAK;AACH,gBAAY;AACZ;AAAA,EACF,KAAK;AAAA,EACL,KAAK;AACH,gBAAY;AACZ;AAAA,EACF,KAAK;AAAA,EACL,KAAK;AAAA,EACL;AACE,gBAAY;AACZ;AACJ;AAGA,MAAe,cAAA;AAAA,EACb,GAAG;AAAA;AAAA,EAEH,KAAK;AAAA;AAAA,EAEL,OAAO,eAAe,iBAAiB,eAAe;AAAA;AAAA,EAEtD,QAAQ,eAAe,gBAAgB,eAAe;AAAA;AAAA,EAEtD,UAAU,eAAe,YAAY,eAAe;AAAA;AAAA,EAEpD,UAAU,eAAe,YAAY,eAAe,cAAc,eAAe;AACnF;;"}